@page "{id?}"
@model ProdutoModel
@{
    ViewData["Title"] = "Produto";
}
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery antiforgery

<div class="container my-5">
    <!-- Nome do Produto -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="text-uppercase fw-bold">@Model.Produto?.ProductName</h2>
        </div>
    </div>

    <!-- Conteúdo -->
    <div class="row">
        <div class="col-12">

            <!-- Aba: Imagens -->
            <div class="info-tab">
                <div class="info-header d-flex justify-content-between align-items-center" onclick="toggleTab(this)">
                    <span class="fw-semibold text-uppercase">DECORAÇÃO</span>
                    <div class="d-flex gap-1">
                        <button type="button" class="icon-btn text-primary" title="Salvar imagens" id="btnSalvarImagens" onclick="enviarImagens('Decoration');">
                            <img src="~/images/icons/sav-image.png" alt="Salvar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-success" title="Adicionar" onclick="triggerImageInput(event)">
                            <img src="~/images/icons/add-image.png" alt="Adicionar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-danger" title="Remover" onclick="event.stopPropagation(); removeCurrentImage();">
                            <img src="~/images/icons/rem-image.png" alt="Remover" class="icon-img" />
                        </button>
                        <input type="file" id="imageInput_Decoration" accept="image/*" capture="environment" style="display:none" onchange="handleImageSelected(event, 'Decoration')">
                        <input type="file" id="imageInputGallery_Decoration" accept="image/*" style="display:none" onchange="handleImageSelected(event, 'Decoration')">
                    </div>
                </div>

                <div class="info-content px-2 py-2">
                    @if (Model.ImgDecoration?.Any() == true)
                    {
                        <div class="text-center">
                            <div class="zoom-container mx-auto mb-3">
                                <img id="mainImage_Decoration" src="@Model.ImgDecoration.First()" class="zoom-img" />
                            </div>
                            <div class="thumbnail-row d-flex align-items-center justify-content-center position-relative">
                                <button class="carousel-btn prev" onclick="scrollThumbnail(-1)">&#10094;</button>
                                <div id="thumbContainer" class="thumb-container-horizontal">
                                    @for (int i = 0; i < Model.ImgDecoration.Count; i++)
                                    {
                                        var img = Model.ImgDecoration[i];
                                        <img src="@img" class="img-thumbnail thumbnail-img" style="cursor: pointer;" onclick="setMainImage('@img','Decoration')" />
                                    }
                                </div>
                                <button class="carousel-btn next" onclick="scrollThumbnail(1)">&#10095;</button>
                            </div>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Nenhuma imagem disponível.</p>
                    }
                </div>
            </div>

            <!-- Aba: Embalagem -->
            <div class="info-tab">
                <div class="info-header d-flex justify-content-between align-items-center" onclick="toggleTab(this)">
                    <span class="fw-semibold text-uppercase">EMBALAGEM</span>
                    <div class="d-flex gap-1">
                        <button type="button" class="icon-btn text-primary" title="Salvar imagens" id="btnSalvarImagens" onclick="enviarImagens('Package');">
                            <img src="~/images/icons/sav-image.png" alt="Salvar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-success" title="Adicionar" onclick="triggerImageInput(event)">
                            <img src="~/images/icons/add-image.png" alt="Adicionar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-danger" title="Remover" onclick="event.stopPropagation(); removeCurrentImage();">
                            <img src="~/images/icons/rem-image.png" alt="Remover" class="icon-img" />
                        </button>
                        <input type="file" id="imageInput_Package" accept="image/*" capture="environment" style="display:none" onchange="handleImageSelected(event, 'Package')">
                        <input type="file" id="imageInputGallery_Package" accept="image/*" style="display:none" onchange="handleImageSelected(event, 'Package')">
                    </div>
                </div>

                <div class="info-content px-2 py-2">
                    @if (Model.ImgPackage?.Any() == true)
                    {
                        <div class="text-center">
                            <div class="zoom-container mx-auto mb-3">
                                <img id="mainImage_Package" src="@Model.ImgPackage.First()" class="zoom-img" />
                            </div>
                            <div class="thumbnail-row d-flex align-items-center justify-content-center position-relative">
                                <button class="carousel-btn prev" onclick="scrollThumbnail(-1)">&#10094;</button>
                                <div id="thumbContainer" class="thumb-container-horizontal">
                                    @for (int i = 0; i < Model.ImgPackage.Count; i++)
                                    {
                                        var img = Model.ImgPackage[i];
                                        <img src="@img" class="img-thumbnail thumbnail-img" style="cursor: pointer;" onclick="setMainImage('@img','Package')" />
                                    }
                                </div>
                                <button class="carousel-btn next" onclick="scrollThumbnail(1)">&#10095;</button>
                            </div>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Nenhuma imagem disponível.</p>
                    }
                </div>
            </div>

            <!-- Aba: Embalagem -->
            <div class="info-tab">
                <div class="info-header d-flex justify-content-between align-items-center" onclick="toggleTab(this)">
                    <span class="fw-semibold text-uppercase">PALETIZAÇÃO</span>
                    <div class="d-flex gap-1">
                        <button type="button" class="icon-btn text-primary" title="Salvar imagens" id="btnSalvarImagens" onclick="enviarImagens('Pallet');">
                            <img src="~/images/icons/sav-image.png" alt="Salvar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-success" title="Adicionar" onclick="triggerImageInput(event)">
                            <img src="~/images/icons/add-image.png" alt="Adicionar" class="icon-img" />
                        </button>
                        <button type="button" class="icon-btn text-danger" title="Remover" onclick="event.stopPropagation(); removeCurrentImage();">
                            <img src="~/images/icons/rem-image.png" alt="Remover" class="icon-img" />
                        </button>
                        <input type="file" id="imageInput_Pallet" accept="image/*" capture="environment" style="display:none" onchange="handleImageSelected(event, 'Pallet')">
                        <input type="file" id="imageInputGallery_Pallet" accept="image/*" style="display:none" onchange="handleImageSelected(event, 'Pallet')">
                    </div>
                </div>

                <div class="info-content px-2 py-2">
                    @if (Model.ImgPallet?.Any() == true)
                    {
                        <div class="text-center">
                            <div class="zoom-container mx-auto mb-3">
                                <img id="mainImage_Pallet" src="@Model.ImgPallet.First()" class="zoom-img" />
                            </div>
                            <div class="thumbnail-row d-flex align-items-center justify-content-center position-relative">
                                <button class="carousel-btn prev" onclick="scrollThumbnail(-1)">&#10094;</button>
                                <div id="thumbContainer" class="thumb-container-horizontal">
                                    @for (int i = 0; i < Model.ImgPallet.Count; i++)
                                    {
                                        var img = Model.ImgPallet[i];
                                        <img src="@img" class="img-thumbnail thumbnail-img" style="cursor: pointer;" onclick="setMainImage('@img','Pallet')" />
                                    }
                                </div>
                                <button class="carousel-btn next" onclick="scrollThumbnail(1)">&#10095;</button>
                            </div>
                        </div>
                    }
                    else
                    {
                        <p class="text-muted">Nenhuma imagem disponível.</p>
                    }
                </div>
            </div>

            <!-- Outras abas -->
            <div class="info-tab">
                <div class="info-header" onclick="toggleTab(this)">INFORMAÇÕES DO PRODUTO</div>
                <div class="info-content px-2 py-2">
                    <div class="row border-bottom py-1">
                        <div class="col-5 fw-semibold">Código do Produto</div>
                        <div class="col-7">@Model.Produto?.ProductId</div>
                    </div>
                    <div class="row border-bottom py-1">
                        <div class="col-5 fw-semibold">Nome</div>
                        <div class="col-7">@Model.Produto?.ProductName</div>
                    </div>
                    <div class="row py-1">
                        <div class="col-5 fw-semibold">Código de Barras</div>
                        <div class="col-7">@Model.Produto?.Barcode</div>
                    </div>
                </div>
            </div>

            <div class="info-tab">
                <div class="info-header" onclick="toggleTab(this)">DIMENSÕES</div>
                <div class="info-content px-2 py-2">
                    <p>Em construção !!!</p>
                </div>
            </div>

            <div class="info-tab">
                <div class="info-header" onclick="toggleTab(this)">INFORMAÇÕES FISCAIS</div>
                <div class="info-content px-2 py-2">
                    <p>Em construção !!!</p>
                </div>
            </div>

            <div class="info-tab">
                <div class="info-header" onclick="toggleTab(this)">OXFORD</div>
                <div class="info-content px-2 py-2">
                    <p>Em construção !!!</p>
                </div>
            </div>

            <div class="info-tab">
                <div class="info-header" onclick="toggleTab(this)">BOM</div>
                <div class="info-content px-2 py-2">
                    <p>Em construção !!!</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/produto.css" />
}

@section Scripts {
    <script src="~/js/produto.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
}

